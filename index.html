<!DOCTYPE html>

<html>

<head>
    <meta charset="UTF-8">
    <title>VueJS Workshop</title>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://onrealm.org/Bundles/Styles/site?v=BvcpfbJ_WnO5avCY7_UOK9q7TpBWQ3ixWj-nspW1AlY1" rel="stylesheet" />
    <link href="styles.css" rel="stylesheet" />
</head>

<body>

    <div id="app" v-cloak>
        <h2>{{heading}}</h2>
        <input type="text" placeholder="Search..." v-model="searchValue" />
        <hr />
        <task-form v-on:submit="addTask"></task-form>
        <ol>
            <li v-for="(t, i) in filteredTasks">
                <task-item
                  v-bind:task="t"
                  v-bind:is-editing="t.id === taskModel.id"
                  v-on:quit-editing="quitEditing"
                  v-on:edit-task="editTask"
                  v-on:delete-task="deleteTask">
                </task-item>
            </li>
        </ol>

        <p v-if="!taskLoaded">Loading task...</p>
        <p v-if="taskLoaded && filteredTasks.length === 0">No task exists</p>
    </div>

    <script type="text/html" id="task-item-template">
      <div>
        <div v-if="!isEditing">
            <span class="pointer" v-on:click="completeTask" v-bind:class="{ 'strikethrough': task.completed }">
              {{ task.task | truncate(20) }}
            </span>
            <hover-card>{{task.dateAdded | formatDate}}</hover-card>
            <button v-on:click="editTask">Edit</button>
            <button v-on:click="deleteTask">Delete</button>
        </div>

        <task-form v-if="isEditing" v-bind:task="task" v-on:submit="saveTask"></task-form>
      </div>
    </script>

    <script type="text/html" id="task-form-template">
      <form v-on:submit.prevent="handleSubmit">
          <input type="text" required placeholder="New task" v-focus v-model="formTask.task" />
          <input type="submit" v-bind:value="isAddForm ? 'Add Task' : 'Save Task'" />
      </form>
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
    <script src="https://onrealm.org/Bundles/Scripts/Vendor?v=jY0FoWE0hhQxdd7zCrSrdlOBv_vgU7xXtzUNZFUY5SM1"></script>
    <script src="https://onrealm.org/Bundles/Scripts/Common?v=nkaSPaueiwzP5YZEFKyO2iMdy9EzBgFl5gwoGknD1w81"></script>
    <script src="https://onrealm.org/Bundles/Scripts/Plugins?v=Sw1asq3TnOoCe8b9JNDBUxg8tQdjeIlKXp1kC_0axhs1"></script>
    <script src="https://unpkg.com/vue@2.2.4" type="text/javascript"></script>
    <script src="api.js" type="text/javascript"></script>
    <script src="code.js" type="text/javascript"></script>
</body>

</html>
